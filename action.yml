name: 'Lane in Consumer Validation'
description: 'Create a new Bit lane for each new Git branch'
branding:
  icon: 'git-merge'
  color: 'purple'
inputs:
  package-manager:
    description: 'The package manager to use for dependency installation'
    required: false
    default: 'npm'
  project-dir:
    description: 'The path to the consumer project'
    required: false
    default: './'
  ws-dir:
    description: 'The path to the workspace'
    required: false
    default: './'
  lane-id:
    description: 'The ID of the Bit lane to sync from in the format: org.scope/lane'
    required: true
  branch-name:
    description: 'The destination Git branch name where the updates are sync to'
    required: false
  skip-push:
    description: 'Skip commit push (for testing)'
    required: false
  skip-ci:
    description: 'Remove adding [skip-ci] to the .bitmap file commit message'
    required: false
runs:
  using: 'composite'
  steps:
    - name: 'install components from lane'
      run: node ${{ github.action_path }}/dist/index.js
      shell: bash
      env:
        RUNNER_TEMP: ${{ runner.temp }}
        WSDIR: ${{ inputs.ws-dir }}
        CACHE: ${{ inputs.cache }}
        RIPPLE: ${{ inputs.ripple }}
        LOG: ${{ inputs.log }}
        SKIP_INSTALL: ${{ inputs.skip-install }}
        PACKAGE_MANAGER: ${{ inputs.package-manager }}
        LANE_ID: ${{ inputs.lane-id }}
        GITHUB_TOKEN: ${{ inputs.github-token }}
        GIT_USER_NAME: ${{ inputs.git-user-name }}
        GIT_USER_EMAIL: ${{ inputs.git-user-email }}
        BIT_CONFIG_ACCESS_TOKEN: ${{ env.bit-config-access-token }}
